{% extends 'SystemApp/base.html' %}
{% load filters %}


{% block head %}
    <script src="https://cdn.anychart.com/js/7.12.0/anychart-bundle.min.js"></script>
    <link rel="stylesheet"
          href="https://cdn.anychart.com/css/7.12.0/anychart-ui.min.css"/>
    <style>
        html, body, #container, #other_container{
            width: 100%;
            height: 95%;
            margin: 0;
            padding: 1px 1px 1px 80px;
        }

        #my{
            padding: 11px 1px 1px 90px;
        }
    </style>
{% endblock head %}



{% block body %}
    <div id="my">
        <button onclick="change_graphic()" id="my_btn">View in graph</button>
    </div>

    <div id="container"></div>
    <div id="other_container" hidden></div>
{% endblock body %}



{% block script %}
    <script>
        anychart.onDocumentReady(function () {

            chart = anychart.pie3d([
                    {% for v in expense_vendors %}
                        {name: "{{ v.0 }} ", value: {{ v.1.0 }} },
                    {% endfor %}
            ]);


            // draw
            chart.title("Top 10: Vendors vs Expenses");
            chart.container("container");
            chart.draw();

            var data = anychart.data.set([
                    {% for v in expense_vendors %}
                        ["{{ v.0 }} ", {{ v.1.0 }} ],
                    {% endfor %}
            ]);

            // set chart type
            other_chart = anychart.bar3d();

            // setting title
            other_chart.title("Top 10: Vendors vs Expenses");

            // enabled grids
            other_chart.grid(0).enabled(true);
            other_chart.grid(1).enabled(true).layout("horizontal");

            // set axes titles
            var xAxis = other_chart.xAxis();
            xAxis.title("Vendors");
            var yAxis = other_chart.yAxis();
            yAxis.title("Money Spent");

            // set data
            var series = other_chart.bar(data);
            series.name("Total Money Spent");

            // draw chart
            other_chart.container("other_container");
            other_chart.draw();


        });


        function change_graphic(){
            var graph = document.getElementById("other_container");
            var pie = document.getElementById("container");
            var btn = document.getElementById("my_btn");
            if (graph.hidden) {
                graph.hidden = false;
                pie.hidden = true;
                btn.textContent = "View in Pie Chart";
            }else if (pie.hidden){
                graph.hidden = true;
                pie.hidden = false;
                btn.textContent = "View in Graph";
            }
        }

        </script>
{% endblock script %}

